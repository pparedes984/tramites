/*
 * File: app/view/direccionar/winEstadoViewController.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Tramites.view.direccionar.winEstadoViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.direccionar.winestado',

    onGrdEstadoRevisarRender: function(component, eOpts) {
        var grid = Ext.getCmp('grdEstadoRevisar');
        var store = grid.getStore();
        var g = Ext.getCmp('grdTramite2');
        var rec = g.selection;
        var tramiteNum = rec.data.TRA_CODIGO;
        var parametroNum = rec.data.TRA_PRM_ID;
        var strEstado2 = store;
        strEstado2.proxy.extraParams = {
            busqueda: 1,
            idtramite: tramiteNum,
            idparametro: parametroNum
        };
        strEstado2.load();
    },

    onWindowClose: function(panel, eOpts) {

        //controla que al cerrar la ventana, el grid vuelva a tener la informaci√≥n que tenia antes
        //porque es el mismo store
        var grid = Ext.getCmp('grdDirecTramite').setVisible(true);
        grid.getStore().removeAll();
        var strEstado = Ext.getStore('Estado');
        var g = Ext.getCmp('grdTramite2');
        var rec = g.selection;
        var tramite = rec.data.TRA_CODIGO;
        var parametro = rec.data.TRA_PRM_ID;
        var fechainicio = rec.data.TRA_FECHARECIBIDO;
        strEstado.proxy.extraParams = {
            idparametro: parametro,
            idtramite: tramite,
            fechaInicio: fechainicio,
            busqueda: 2,
            unidad: UNIDADDIR
        };
        strEstado.load();
    }

});
