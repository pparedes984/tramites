/*
 * File: app/view/panel/pnlNuevoViewController4.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Tramites.view.panel.pnlNuevoViewController4', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.panel.pnldireccionar',

    onArbolUnidadItemClick: function(dataview, record, item, index, e, eOpts) {
        Ext.getCmp('pnlDireccionarCentral').removeAll();
        var win = Ext.create('Tramites.view.direccionar.DirecGeneral');
        this.getView().down('#pnlDireccionarCentral').add(win);
        Ext.getCmp('pnlDestinosDireccionar').setVisible(false);
        Ext.getCmp('txtAsignadoA').setHidden(true);
        Ext.getCmp('txtAsignadoADestino').setDisabled(true);
        Ext.getCmp('btnAnularDestino').setVisible(false);
        Ext.getCmp('chRevisadoUnd').setDisabled(true);
        Ext.getCmp('grdTramite2').getStore().removeAll();
        STRTRAMITEDETA = Ext.getStore('Registro');
        UNIDADDIR = record.data.id;
        PARAMETROPRINCIPAL = Ext.getCmp('cbParametroPrincipal').getValue();
        if(record.data.id === '183')//pantalla de direccionamiento general
        {
            Ext.getCmp('recibidoCheck').setDisabled(false);
            Ext.getCmp('chbRevisadoUnidad').setDisabled(true);
            Ext.getCmp('btnAnularDestino').setVisible(false);
            Ext.getCmp('cbEstado').setDisabled(true);
            Ext.getCmp('txtTramitadoA').setDisabled(true);
            Ext.getCmp('txtTramitadoADestino').setHidden(true);
            Ext.getCmp('txtDescripcionDestino').setHidden(true);
            Ext.getCmp('txtDescripDestino').setDisabled(true);
            Ext.getCmp('btnAgregarDestino').setVisible(true);
            Ext.getCmp('btnVerDestinos').setVisible(false);
            Ext.getCmp('txtDestino').setHidden(false);

            win.show();
            STRTRAMITEDETA.proxy.extraParams = {
                busqueda: 2,
                parametro: PARAMETROPRINCIPAL
            };
            STRTRAMITEDETA.load();

        }
        else if(record.data.id === '1'||record.data.id === '2'||record.data.id === '3'||
        record.data.id === '4'||record.data.id === '5'||record.data.id === '6'||
        record.data.id === '7'||record.data.id === '8'||record.data.id === '9'||
        record.data.id === '123'||record.data.id === '182')//pantallas de unidades de direccionamiento
        {

            Ext.getCmp('recibidoCheck').setHidden(true);
            Ext.getCmp('recibidoCheck').setDisabled(true);
            Ext.getCmp('chbRevisadoUnidad').setDisabled(false);
            Ext.getCmp('cbEstado').setDisabled(false);
            Ext.getCmp('btnAgregarDestino').setVisible(false);
            Ext.getCmp('txtTramitadoA').setDisabled(false);
            Ext.getCmp('txtTramitadoADestino').setHidden(false);
            Ext.getCmp('txtDescripcionDestino').setHidden(false);
            Ext.getCmp('txtDescripDestino').setDisabled(false);
            Ext.getCmp('txtObservacionDestino').setDisabled(true);
            Ext.getCmp('txtObservacion').setHidden(true);
            Ext.getCmp('btnVerDestinos').setVisible(true);
            Ext.getCmp('txtDestino').setHidden(true);
            //Ext.getCmp('cbEstado').setEditable(true);
            win.show();
            STRTRAMITEDETA.proxy.extraParams = {
                busqueda: 3,
                unidad: UNIDADDIR,
                parametro: PARAMETROPRINCIPAL
            };
            console.log(record.data.id);
            STRTRAMITEDETA.load();

        }

    },

    onArbolUnidadAfterRender: function(component, eOpts) {
        Ext.getCmp('ArbolUnidad').getStore().removeAll();
        var strArbolDireccion = Ext.getCmp('ArbolUnidad').getStore();
        var parametroid = Ext.getCmp('cbParametroPrincipal').getValue();
        if(parametroid!==''){
            strArbolDireccion.proxy.extraParams = {
                parametro: parametroid
            };
            strArbolDireccion.load();
        }
    }

});
